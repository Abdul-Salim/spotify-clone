(this.webpackJsonpspotify=this.webpackJsonpspotify||[]).push([[0],{132:function(e,t,c){},172:function(e,t){},193:function(e,t,c){},195:function(e,t,c){},196:function(e,t,c){},197:function(e,t,c){},198:function(e,t,c){},199:function(e,t,c){},200:function(e,t,c){},201:function(e,t,c){},203:function(e,t,c){},204:function(e,t,c){},205:function(e,t,c){},206:function(e,t,c){},207:function(e,t,c){"use strict";c.r(t);var n=c(0),i=c(1),l=c.n(i),a=c(53),s=c.n(a),o=c(10),r=c(7),d=(c(131),c(132),c(9)),u=c(2),j=c(35),v=c.n(j),b=c(95),h=c.n(b),O="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("9a4e88d573a348c6a248ab88fcf6cdee","&response_type=code&redirect_uri=").concat("http://localhost:3000/redirect/","&scope=").concat(["streaming","user-read-email","user-read-private","user-library-read","user-library-modify","user-read-currently-playing","user-read-recently-played","user-read-playback-state","user-top-read","user-modify-playback-state"].join("%20"),"&show_dialog=true"),m=new h.a({clientId:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:4000",REACT_APP_REDIRECT_URI:"http://localhost:3000/redirect/"}).CLIENT_ID,clientSecret:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:4000",REACT_APP_REDIRECT_URI:"http://localhost:3000/redirect/"}).CLIENT_SECRET}),g=c(233),f=Object(r.b)({key:"userState",default:null}),x=Object(r.b)({key:"token",default:""}),p=Object(r.b)({key:"",default:null}),y=function(){var e=Object(d.e)(),t=Object(r.c)(x),c=Object(u.a)(t,2),l=(c[0],c[1]),a=Object(i.useState)(!1),s=Object(u.a)(a,2),o=s[0],j=s[1],b=new URLSearchParams(window.location.search).get("code");return Object(i.useEffect)((function(){j(!0),v.a.post("http://localhost:4000/login",{code:b}).then((function(t){var c,n,i,a,s,o;localStorage.setItem("refreshToken",null===t||void 0===t||null===(c=t.data)||void 0===c?void 0:c.refreshToken),localStorage.setItem("accessToken",null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.accessToken);var r=(new Date).getTime()+1e3*(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.expiresIn);localStorage.setItem("expiresIn",r),m.setAccessToken(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.accessToken),m.setRefreshToken(null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.refreshToken),l(null===t||void 0===t||null===(o=t.data)||void 0===o?void 0:o.accessToken),e("/")})).catch((function(t){e("/auth")}))}),[b]),Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:["Logging you in ",o&&Object(n.jsx)(g.a,{})]})};c(193);var N=function(){return Object(n.jsxs)("div",{className:"login",children:[Object(n.jsx)("img",{src:"https://getheavy.com/wp-content/uploads/2019/12/spotify2019-830x350.jpg",alt:""}),Object(n.jsx)("a",{href:O,children:"LOGIN WITH SPOTIFY"})]})},k=function(){return Object(d.h)([{path:"login",element:Object(n.jsx)(N,{})},{path:"",element:Object(n.jsx)(d.a,{to:"../login"})}])};var T=function(){var e=Object(d.e)(),t=Object(r.c)(x),c=Object(u.a)(t,2),l=(c[0],c[1]),a=localStorage.getItem("accessToken"),s=localStorage.getItem("expiresIn"),o=localStorage.getItem("refreshToken");return Object(i.useEffect)((function(){(new Date).getTime()<=s&&a&&"undefined"!==a&&o?(m.setAccessToken(a),l(a),e("/")):o?(new Date).getTime()>=s&&v.a.post("http://localhost:4000/refresh",{refreshToken:o}).then((function(t){var c,n,i;console.log(t),localStorage.setItem("accessToken",null===t||void 0===t||null===(c=t.data)||void 0===c?void 0:c.accessToken);var s=(new Date).getTime()+1e3*(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.expiresIn);localStorage.setItem("expiresIn",s),l(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.accessToken),m.setAccessToken(a),e("/home")})).catch((function(){window.location="/"})):e("/auth")}),[a,s,o]),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(k,{})})},S=c(15),w=c(24),_=c(29),C=c(31),E=c(4),I=(c(118),Object(r.b)({key:"playerState",default:{playing:!1,playingTrack:null}}));c(195);var A=function(e){var t=e.onClick,c=Object(i.useState)(!1),l=Object(u.a)(c,2),a=l[0],s=l[1];return Object(n.jsx)("div",{className:"mx-1",onClick:t,children:Object(n.jsx)("svg",{role:"img",height:"16",width:"16",viewBox:"0 0 16 16",fill:a?"#fff":"#bababa",onMouseOver:function(){return s(!0)},onMouseLeave:function(){return s(!1)},children:Object(n.jsx)("path",{d:"M12.7 1a.7.7 0 00-.7.7v5.15L2.05 1.107A.7.7 0 001 1.712v12.575a.7.7 0 001.05.607L12 9.149V14.3a.7.7 0 00.7.7h1.6a.7.7 0 00.7-.7V1.7a.7.7 0 00-.7-.7h-1.6z"})})})},L=function(e){var t=e.onClick,c=Object(i.useState)(!1),l=Object(u.a)(c,2),a=l[0],s=l[1];return Object(n.jsx)("div",{className:"mx-1",onClick:t,children:Object(n.jsx)("svg",{role:"img",height:"16",width:"16",viewBox:"0 0 16 16",fill:a?"#fff":"#bababa",onMouseOver:function(){return s(!0)},onMouseLeave:function(){return s(!1)},children:Object(n.jsx)("path",{d:"M3.3 1a.7.7 0 01.7.7v5.15l9.95-5.744a.7.7 0 011.05.606v12.575a.7.7 0 01-1.05.607L4 9.149V14.3a.7.7 0 01-.7.7H1.7a.7.7 0 01-.7-.7V1.7a.7.7 0 01.7-.7h1.6z"})})})},P=function(){return Object(n.jsx)("div",{className:"mx-2",children:Object(n.jsx)("svg",{role:"presentation",height:"16",width:"16","aria-label":"Volume",id:"volume-icon",viewBox:"0 0 16 16",class:"Svg-sc-1bi12j5-0 EQkJl",children:Object(n.jsx)("path",{d:"M9.741.85a.75.75 0 01.375.65v13a.75.75 0 01-1.125.65l-6.925-4a3.642 3.642 0 01-1.33-4.967 3.639 3.639 0 011.33-1.332l6.925-4a.75.75 0 01.75 0zm-6.924 5.3a2.139 2.139 0 000 3.7l5.8 3.35V2.8l-5.8 3.35zm8.683 6.087a4.502 4.502 0 000-8.474v1.65a2.999 2.999 0 010 5.175v1.649z"})})})},M=c(234),R=c(230),D=function(e){var t=e.onClick,c=Object(i.useState)(!1),l=Object(u.a)(c,2),a=l[0],s=l[1];return Object(n.jsx)("div",{className:"mx-1",style:{backgroundColor:a?"#fff":"#bababa",borderRadius:"50%",height:"32px",width:"32px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseOver:function(){return s(!0)},onMouseLeave:function(){return s(!1)},onClick:t,children:Object(n.jsx)("svg",{role:"img",height:"16",width:"16",viewBox:"0 0 16 16",fill:"black",children:Object(n.jsx)("path",{d:"M3 1.713a.7.7 0 011.05-.607l10.89 6.288a.7.7 0 010 1.212L4.05 14.894A.7.7 0 013 14.288V1.713z"})})})},B=function(e){var t=e.onClick,c=Object(i.useState)(!1),l=Object(u.a)(c,2),a=l[0],s=l[1];return Object(n.jsx)("div",{className:"mx-1",style:{backgroundColor:a?"#fff":"#bababa",borderRadius:"50%",height:"32px",width:"32px",display:"flex",alignItems:"center",justifyContent:"center"},onMouseOver:function(){return s(!0)},onMouseLeave:function(){return s(!1)},onClick:t,children:Object(n.jsx)("svg",{role:"img",height:"16",width:"16",viewBox:"0 0 16 16",fill:"black",children:Object(n.jsx)("path",{d:"M2.7 1a.7.7 0 00-.7.7v12.6a.7.7 0 00.7.7h2.6a.7.7 0 00.7-.7V1.7a.7.7 0 00-.7-.7H2.7zm8 0a.7.7 0 00-.7.7v12.6a.7.7 0 00.7.7h2.6a.7.7 0 00.7-.7V1.7a.7.7 0 00-.7-.7h-2.6z"})})})},F=function(){var e,t,c,l,a,s,o,d,j=localStorage.getItem("accessToken"),v=Object(r.c)(I),b=Object(u.a)(v,2),h=b[0],O=b[1],g=Object(i.useState)(50),f=Object(u.a)(g,2),x=f[0],p=f[1],y=Object(i.useState)(0),N=Object(u.a)(y,2),k=N[0],T=(N[1],Object(i.useState)(0)),S=Object(u.a)(T,2);S[0],S[1];Object(i.useEffect)((function(){console.log(h)}),[h]);var w=Object(i.useState)(void 0),_=Object(u.a)(w,2),C=_[0],F=_[1];Object(i.useEffect)((function(){console.log("hi");var e=document.createElement("script");e.src="https://sdk.scdn.co/spotify-player.js",e.async=!0,document.body.appendChild(e),window.onSpotifyWebPlaybackSDKReady=function(){var e=new window.Spotify.Player({name:"Spotify-clone-player",getOAuthToken:function(e){e(j)},volume:.5});F(e),e.addListener("ready",(function(e){var t;e.device_id;m.setAccessToken(j),m.setAccessToken(j),m.getMyDevices().then((function(e){var c;t=e.body.devices.filter((function(e){return"Spotify-clone-player"===(null===e||void 0===e?void 0:e.name)})),m.transferMyPlayback([null===(c=t[0])||void 0===c?void 0:c.id]).then((function(){})).catch((function(e){}))})).catch((function(e){}))})),e.addListener("not_ready",(function(e){e.device_id})),e.connect()}}),[]),Object(i.useEffect)((function(){console.log("first"),C&&!(null===h||void 0===h?void 0:h.playingTrack)&&(m.getMyCurrentPlayingTrack().then((function(e){var t,c,n;O(Object(E.a)(Object(E.a)({},h),{},{playingTrack:null===e||void 0===e||null===(t=e.body)||void 0===t?void 0:t.item,playlisturi:null===e||void 0===e||null===(c=e.body)||void 0===c||null===(n=c.external_urls)||void 0===n?void 0:n.uri}))})),m.getMyCurrentPlaybackState().then((function(e){var t,c;O(Object(E.a)(Object(E.a)({},h),{},{playing:null===e||void 0===e||null===(t=e.body)||void 0===t?void 0:t.is_playing,progress:null===e||void 0===e||null===(c=e.body)||void 0===c?void 0:c.progress_ms}))})),p(50))}),[C]);var z=function(){m.setAccessToken(j),m.getMyCurrentPlaybackState().then((function(e){var t,c,n;(null===e||void 0===e||null===(t=e.body)||void 0===t?void 0:t.is_playing)?(m.pause(),O(Object(E.a)(Object(E.a)({},h),{},{playing:!1,progress:null===e||void 0===e||null===(c=e.body)||void 0===c?void 0:c.progress_ms}))):(m.play(),O(Object(E.a)(Object(E.a)({},h),{},{playing:!0,progress:null===e||void 0===e||null===(n=e.body)||void 0===n?void 0:n.progress_ms})))}))};return Object(n.jsxs)("div",{className:"footer-player",children:[Object(n.jsxs)("div",{className:"d-flex footer-left",children:[Object(n.jsx)("img",{src:null===h||void 0===h||null===(e=h.playingTrack)||void 0===e||null===(t=e.album)||void 0===t||null===(c=t.images)||void 0===c||null===(l=c[0])||void 0===l?void 0:l.url,width:64,height:64,alt:""}),Object(n.jsxs)("div",{className:"d-flex flex-column justify-content-center px-2",children:[Object(n.jsx)("h3",{className:"track-name",children:null===h||void 0===h||null===(a=h.playingTrack)||void 0===a?void 0:a.name}),Object(n.jsx)("p",{className:"artist-name",children:null===h||void 0===h||null===(s=h.playingTrack)||void 0===s||null===(o=s.artists)||void 0===o||null===(d=o[0])||void 0===d?void 0:d.name})]})]}),Object(n.jsxs)("div",{className:"footer-center",children:[Object(n.jsxs)("div",{className:"d-flex w-100 justify-content-center align-items-center",children:[Object(n.jsx)(L,{onClick:function(){m.skipToPrevious()}}),(null===h||void 0===h?void 0:h.playing)?Object(n.jsx)(B,{onClick:z}):Object(n.jsx)(D,{onClick:z}),Object(n.jsx)(A,{onClick:function(){m.skipToNext()}})]}),Object(n.jsx)("div",{className:"px-5 mt-2",children:Object(n.jsx)(M.a,{variant:"determinate",value:k})})]}),Object(n.jsxs)("div",{className:"d-flex footer-right",children:[Object(n.jsx)(P,{}),Object(n.jsx)(R.a,{size:"small","aria-label":"Volume",defaultValue:70,value:x,onChangeCommitted:function(){m.setVolume(x)},onChange:function(e){var t;return p(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)}})]})]})};var z=function(){return Object(r.d)(I).playingTrack,localStorage.getItem("accessToken")&&Object(n.jsx)(F,{})};c(196),c(197);var U=function(e){var t=e.title,c=e.Icon,i=e.id,l=e.key;return Object(n.jsxs)("div",{className:"sidebarOption",children:[c&&Object(n.jsx)(c,{className:"sidebarOption__icon"}),c?Object(n.jsx)("h4",{children:t}):Object(n.jsxs)(o.c,{to:"/playlist/".concat(i),activeClassName:"playlist-active",children:[Object(n.jsx)("p",{className:"playlist-title",children:t})," "]})]},l)},V=c(107),H=c.n(V),G=c(108),W=c.n(G),J=c(109),K=c.n(J),Y=c(110),Q=c.n(Y),Z=c(111),q=c.n(Z),X=c.p+"static/media/spotify-logo-white.f48fb565.png",$=Object(r.b)({key:"playlistState",default:{playlist:[]}});var ee=function(){localStorage.getItem("accessToken");var e,t=Object(r.c)($),c=Object(u.a)(t,2),i=c[0];return c[1],Object(n.jsxs)("div",{className:"sidebar",children:[Object(n.jsx)(o.c,{to:"/",children:Object(n.jsx)("img",{src:X,alt:"",className:"sidebar__logo"})}),Object(n.jsx)(o.c,{to:"/",children:Object(n.jsx)(U,{title:"Home",Icon:H.a})}),Object(n.jsx)(o.c,{to:"/search",children:Object(n.jsx)(U,{title:"Search",Icon:W.a})}),Object(n.jsx)(o.c,{to:"/library",children:Object(n.jsx)(U,{title:"Your Library",Icon:K.a})}),Object(n.jsx)("br",{}),Object(n.jsx)(o.c,{to:"/create-playlist",children:Object(n.jsx)(U,{title:"Create Playlist",Icon:Q.a})}),Object(n.jsx)(o.c,{to:"/liked",children:Object(n.jsx)(U,{title:"Liked Songs",Icon:q.a})}),Object(n.jsx)("hr",{className:"line"}),Object(n.jsx)("div",{className:"playlists",children:null===i||void 0===i||null===(e=i.items)||void 0===e?void 0:e.map((function(e){return Object(n.jsx)(U,{title:e.name,playlist:e,id:e.id},e.id)}))})]})},te=c(68),ce=c(232),ne=c(115),ie=c.n(ne),le=c(114),ae=c.n(le),se=c(112),oe=c.n(se),re=c(113),de=c.n(re),ue=c(116),je=c.n(ue),ve=(c(198),c(28)),be=c.n(ve),he=c(54),Oe=v.a.CancelToken,me={},ge=function(){var e=localStorage.getItem("accessToken"),t=localStorage.getItem("refreshToken"),c=localStorage.getItem("expiresIn");if(t){if(!((new Date).getTime()>=c||isNaN(c)||"undefined"===e)&&e)return e;v.a.post("http://localhost:4000/refresh",{refresh:t}).then((function(e){var t,c,n;localStorage.setItem("accessToken",null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.accessToken);var i=(new Date).getTime()+1e3*(null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.expiresIn);return localStorage.setItem("expiresIn",i),null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.accessToken})).catch((function(){window.location="/auth"}))}else window.location="/auth"};function fe(e){return xe.apply(this,arguments)}function xe(){return(xe=Object(he.a)(be.a.mark((function e(t){var c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.cancel_token&&me[t.cancel_token]&&me[t.cancel_token](),e.prev=1,e.next=4,v()(pe(t.method,t.url,t.params,t.is_authenticated,t.content_type,t.cancel_token));case 4:return c=e.sent,e.abrupt("return",Ne(t.route,c,t.is_authenticated));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",ye(t.route,e.t0,t.hideModal));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GET",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"json",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a={headers:{"Content-Type":"application/x-www-form-urlencoded"},credentials:"include",method:e,url:"".concat("http://localhost:4000").concat(t)};if(n){var s=ge();s&&(a.headers.Authorization="".concat(s))}return"GET"===e&&c?a.params=c:"json"===i?(a.headers["Content-Type"]="application/json",a.data=c):a.data=c,l&&(a.cancelToken=new Oe((function(e){me[l]=e}))),a}function ye(e,t,c){return t&&t.response&&401===t.response.status&&(c&&c(),localStorage.removeItem("userAccessToken"),window.location.assign("/auth")),Promise.reject(t)}function Ne(e,t){return t}var ke=function(e){return fe({method:"GET",url:"/search-tracks",params:e})},Te=function(e){return fe({method:"GET",url:"/search-artists",params:e})},Se=function(e){return fe({method:"GET",url:"/search-playlists",params:e})},we=Object(r.b)({key:"headerState",default:{isBlack:!1,search:""}}),_e=function(e){var t=e.className,c=e.onClick;return Object(n.jsx)("span",{className:t,onClick:c,children:Object(n.jsx)("svg",{role:"img",height:"24",width:"24",class:"Svg-sc-1bi12j5-0 jgfuCe mOLTJ2mxkzHJj6Y9_na_",viewBox:"0 0 24 24",children:Object(n.jsx)("path",{d:"M3.293 3.293a1 1 0 011.414 0L12 10.586l7.293-7.293a1 1 0 111.414 1.414L13.414 12l7.293 7.293a1 1 0 01-1.414 1.414L12 13.414l-7.293 7.293a1 1 0 01-1.414-1.414L10.586 12 3.293 4.707a1 1 0 010-1.414z"})})})},Ce=function(){var e,t,c,l=Object(r.c)(we),a=Object(u.a)(l,2),s=a[0],o=a[1],j=Object(r.c)(f),v=Object(u.a)(j,2),b=v[0],h=v[1],O=Object(i.useState)(!1),m=Object(u.a)(O,2),g=m[0],x=m[1],p=Object(i.useState)(""),y=Object(u.a)(p,2),N=y[0],k=y[1],T=localStorage.getItem("accessToken"),S=Object(d.e)(),w=Object(i.useCallback)(Object(te.debounce)((function(e){return function(e){var t;o(Object(E.a)(Object(E.a)({},s),{},{search:null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value}))}(e)}),600),[]);return Object(i.useEffect)((function(){var e;T&&(null===(e=fe({method:"GET",url:"/me"}))||void 0===e||e.then((function(e){console.log(e),h(null===e||void 0===e?void 0:e.data)})).catch((function(e){console.log("err",e)})))}),[T]),Object(n.jsxs)("div",{className:"header ".concat((null===s||void 0===s?void 0:s.isBlack)&&"grey"),style:{justifyContent:"space-between",backgroundColor:"/search"===!(null===(e=window.location)||void 0===e?void 0:e.pathname)&&"#040404"},children:[Object(n.jsxs)("div",{className:"header__left",children:[Object(n.jsxs)("div",{style:{marginLeft:"0",display:"flex"},children:[Object(n.jsx)("span",{className:"back-icon cursor-pointer",onClick:function(){S(-1)},children:Object(n.jsx)(oe.a,{})}),Object(n.jsx)("span",{className:"front-icon cursor-pointer",onClick:function(){return S(1)},children:Object(n.jsx)(de.a,{})})]}),"/search"===(null===(t=window.location)||void 0===t?void 0:t.pathname)&&Object(n.jsxs)("div",{className:"position-relative",children:[Object(n.jsx)("svg",{role:"img",height:"24",width:"24",class:"Svg-sc-1bi12j5-0 jgfuCe mOLTJ2mxkzHJj6Y9_na_","aria-hidden":"true",viewBox:"0 0 24 24",children:Object(n.jsx)("path",{d:"M10.533 1.279c-5.18 0-9.407 4.14-9.407 9.279s4.226 9.279 9.407 9.279c2.234 0 4.29-.77 5.907-2.058l4.353 4.353a1 1 0 101.414-1.414l-4.344-4.344a9.157 9.157 0 002.077-5.816c0-5.14-4.226-9.28-9.407-9.28zm-7.407 9.279c0-4.006 3.302-7.28 7.407-7.28s7.407 3.274 7.407 7.28-3.302 7.279-7.407 7.279-7.407-3.273-7.407-7.28z"})}),Object(n.jsx)("input",{type:"text",placeholder:"Search for Artist, Songs ",value:N,onChange:function(e){k(e.target.value),w(e)}}),(null===N||void 0===N?void 0:N.length)>0?Object(n.jsx)(_e,{className:"cross",onClick:function(){return k("")}}):""]})]}),Object(n.jsxs)("div",{className:"profile",onClick:function(){return x(!g)},children:[Object(n.jsx)(ce.a,{src:null===b||void 0===b||null===(c=b.images[0])||void 0===c?void 0:c.url,alt:null===b||void 0===b?void 0:b.display_name}),Object(n.jsx)("h6",{className:"m-0 ms-2",children:null===b||void 0===b?void 0:b.display_name}),g?Object(n.jsx)(ae.a,{}):Object(n.jsx)(ie.a,{})]}),g?Object(n.jsxs)("div",{className:"profile-menu",children:[Object(n.jsxs)("div",{className:"menu-item",children:[Object(n.jsx)("p",{children:"Account"}),Object(n.jsx)("span",{children:Object(n.jsx)(je.a,{fontSize:"small"})})]}),Object(n.jsx)("div",{className:"menu-item",children:Object(n.jsx)("p",{children:"Profile"})}),Object(n.jsx)("div",{className:"menu-item",children:Object(n.jsx)("p",{children:"Log out"})})]}):""]})},Ee=(c(199),function(e){var t=e.height,c=e.width,i=e.item,l=e.playPlaylist,a=Number(c)/2,s=Number(t)/2;return Object(n.jsx)("div",{className:"spotify-play",style:{height:"".concat(t,"px"),width:"".concat(c,"px")},onClick:function(e){return l(e,i)},children:Object(n.jsx)("svg",{height:s,role:"img",width:a,viewBox:"0 0 24 24","aria-hidden":"true",children:Object(n.jsx)("polygon",{points:"21.57 12 5.98 3 5.98 21 21.57 12",fill:"#ffffff"})})})}),Ie=function(){var e,t,c,l,a=Object(i.useRef)(),s=Object(d.e)(),j=Object(r.c)(I),v=Object(u.a)(j,2),b=v[0],h=v[1],O=Object(r.c)(we),g=Object(u.a)(O,2),f=g[0],x=g[1],y=(Object(r.d)(p),Object(i.useState)([])),N=Object(u.a)(y,2),k=N[0],T=(N[1],Object(i.useState)([])),S=Object(u.a)(T,2),w=S[0],_=S[1],C=Object(i.useState)([]),A=Object(u.a)(C,2),L=A[0],P=A[1],M=Object(i.useState)(),R=Object(u.a)(M,2),D=R[0],B=R[1],F=localStorage.getItem("accessToken");Object(i.useEffect)((function(){F&&(m.setAccessToken(F),m.getNewReleases({limit:5,offset:0,country:"IN"}).then((function(e){_(null===e||void 0===e?void 0:e.body)})).catch((function(e){console.log("Something went wrong!",e)})),m.getFeaturedPlaylists({limit:5,offset:1,country:"IN",timestamp:"2014-10-23T09:00:00"}).then((function(e){P(null===e||void 0===e?void 0:e.body)})).catch((function(e){console.log("Something went wrong!",e)})),m.getMyTopTracks().then((function(e){var t=e.body.items;console.log(t)}),(function(e){console.log("Something went wrong!",e)})))}),[F]);var z=function(e,t){console.log(t),h(Object(E.a)(Object(E.a)({},b),{},{playingTrack:t}))};return Object(n.jsx)("div",{className:"body",ref:a,onScroll:function(){a.current.scrollTop>=80?x(Object(E.a)(Object(E.a)({},f),{},{isBlack:!0})):x(Object(E.a)(Object(E.a)({},f),{},{isBlack:!1}))},children:Object(n.jsx)("div",{style:{marginTop:"40px"},children:Object(n.jsxs)("div",{className:"search-results",children:[null===k||void 0===k?void 0:k.map((function(e){return Object(n.jsx)("div",{className:""})})),Object(n.jsxs)("div",{className:"body__songs",children:[Object(n.jsxs)("div",{className:"result-head",children:[Object(n.jsx)("h2",{className:"head text-white",children:"New Releases"}),Object(n.jsx)(o.b,{to:"/",className:"see-all",children:"SEE ALL"})]}),Object(n.jsx)("div",{className:"search-result-artist",children:null===w||void 0===w||null===(e=w.albums)||void 0===e||null===(t=e.items)||void 0===t?void 0:t.map((function(e){var t,c,i;return Object(n.jsx)("div",{onClick:function(){var t;return s("/albums/".concat(null===e||void 0===e||null===(t=e.uri)||void 0===t?void 0:t.split(":")[2]))},className:"search-link",children:Object(n.jsxs)("div",{className:"artist-card",onClick:function(t){return z(0,e)},onMouseOver:function(){B(e.uri)},onMouseLeave:function(){B()},children:[Object(n.jsxs)("div",{className:"card-inner",children:[Object(n.jsx)("img",{src:null===e||void 0===e||null===(t=e.images[0])||void 0===t?void 0:t.url,alt:"artist",className:"playlist-image"}),D===e.uri&&Object(n.jsx)(Ee,{width:"40",height:"40",playPlaylist:function(){return z()}})]}),Object(n.jsx)("div",{className:"card-outer",children:Object(n.jsx)("p",{className:"mt-2",children:(null===(c=e.name)||void 0===c?void 0:c.length)>15?(null===(i=e.name)||void 0===i?void 0:i.substring(0,15))+"...":e.name})})]})})}))}),Object(n.jsxs)("div",{className:"result-head",children:[Object(n.jsx)("h2",{className:"head text-white",children:"Featured"}),Object(n.jsx)(o.b,{to:"/",className:"see-all",children:"SEE ALL"})]}),Object(n.jsx)("div",{className:"search-result-artist",children:null===L||void 0===L||null===(c=L.playlists)||void 0===c||null===(l=c.items)||void 0===l?void 0:l.map((function(e){var t,c,i,l;return Object(n.jsx)(o.b,{to:"/playlist/".concat(null===e||void 0===e||null===(t=e.uri)||void 0===t?void 0:t.split(":")[2]),className:"search-link",children:Object(n.jsxs)("div",{className:"artist-card",onClick:function(){return z()},onMouseOver:function(){B(e.uri)},onMouseLeave:function(){B()},children:[Object(n.jsxs)("div",{className:"card-inner",children:[Object(n.jsx)("img",{src:null===e||void 0===e||null===(c=e.images[0])||void 0===c?void 0:c.url,alt:"artist",className:"playlist-image"}),D===e.uri&&Object(n.jsx)(Ee,{width:"40",height:"40",playPlaylist:function(){return z()}})]}),Object(n.jsx)("div",{className:"card-outer",children:Object(n.jsx)("p",{className:"mt-1",children:(null===(i=e.name)||void 0===i?void 0:i.length)>15?(null===(l=e.name)||void 0===l?void 0:l.substring(0,15))+"...":e.name})})]})})}))})]})]})})})};c(200);var Ae=function(){return Object(n.jsx)("div",{className:"player",children:Object(n.jsx)(Ie,{spotify:m})})},Le=c(43),Pe=c.n(Le),Me=c(49),Re=c.n(Me);function De(e){var t,c,l,a=e.track,s=e.chooseTrack,o=e.index,d=Object(i.useState)(),j=Object(u.a)(d,2),v=j[0],b=j[1],h=Object(r.c)(I),O=Object(u.a)(h,2),m=O[0];O[1];return Object(n.jsxs)("div",{className:"songRow",style:{cursor:"pointer"},onClick:function(){console.log(a),s(a)},onMouseEnter:function(){return b(null===a||void 0===a?void 0:a.id)},onMouseLeave:function(){return b()},children:[Object(n.jsx)("p",{className:"mx mb-0",children:v===(null===a||void 0===a?void 0:a.id)?(null===m||void 0===m?void 0:m.playingTrack)===a&&!0===(null===m||void 0===m?void 0:m.playing)?Object(n.jsx)(Re.a,{}):Object(n.jsx)(Pe.a,{className:"song-play"}):o+1}),Object(n.jsx)("img",{src:(null===a||void 0===a?void 0:a.albumUrl)||(null===a||void 0===a||null===(t=a.album)||void 0===t||null===(c=t.images[0])||void 0===c?void 0:c.url),className:"songRow__album",alt:"album"}),Object(n.jsxs)("div",{className:"songRow__info",children:[Object(n.jsx)("div",{children:(null===a||void 0===a?void 0:a.title)||(null===a||void 0===a?void 0:a.name)}),Object(n.jsx)("div",{className:"text-muted",children:(null===a||void 0===a?void 0:a.artist)||(null===a||void 0===a||null===(l=a.artists)||void 0===l?void 0:l.map((function(e){return null===e||void 0===e?void 0:e.name})))})]})]})}c(201);var Be=function(e){var t=e.item,c=e.setSearchPlaylist,i=localStorage.getItem("accessToken"),l=Object(d.e)();return Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"category__item",onClick:function(){return e=t.id,void(i&&(m.setAccessToken(i),m.getPlaylistsForCategory(e,{limit:50}).then((function(e){var n,i;console.log(e),c(null===e||void 0===e||null===(n=e.body)||void 0===n||null===(i=n.playlists)||void 0===i?void 0:i.items),l("/search/playlists/".concat(null===t||void 0===t?void 0:t.name))}),(function(e){console.log("Something went wrong!",e)}))));var e},children:Object(n.jsxs)("div",{className:"item-wrapper",style:{backgroundColor:"#".concat(null===t||void 0===t?void 0:t.color)},children:[Object(n.jsx)("p",{children:t.name}),Object(n.jsx)("img",{src:t.icons[0].url,alt:"category"})]})})})},Fe=(c(202),function(e){var t,c,l,a,s,r,d=e.album,j=e.playPlaylist,v=Object(i.useState)(!1),b=Object(u.a)(v,2),h=b[0],O=b[1];return Object(n.jsx)("div",{children:Object(n.jsx)(o.b,{to:"/albums/".concat(d.uri.split(":")[2]),className:"search-link",children:Object(n.jsxs)("div",{className:"artist-card",onMouseOver:function(){O(d.id)},onMouseLeave:function(){O()},children:[Object(n.jsxs)("div",{className:"card-inner",children:[Object(n.jsx)("img",{src:d.albumUrl||(null===d||void 0===d||null===(t=d.images[0])||void 0===t?void 0:t.url),alt:"artist",className:"playlist-image"}),h===d.id&&Object(n.jsx)(Ee,{width:"40",height:"40",playPlaylist:function(){return j(d)}})," "]}),Object(n.jsxs)("div",{className:"card-outer",children:[Object(n.jsx)("p",{className:"dark m-0 mt-1",children:((null===(c=d.title)||void 0===c?void 0:c.length)>15?(null===(l=d.title)||void 0===l?void 0:l.substring(0,15))+"...":d.title)||((null===(a=d.name)||void 0===a?void 0:a.length)>15?(null===(s=d.name)||void 0===s?void 0:s.substring(0,15))+"...":d.name)}),Object(n.jsxs)("p",{className:"light m-0",children:["By"," ",(null===d||void 0===d?void 0:d.artist)||(null===d||void 0===d||null===(r=d.artists)||void 0===r?void 0:r.map((function(e){return null===e||void 0===e?void 0:e.name})))]})]})]})})})}),ze=function(){var e=Object(i.useRef)(),t=Object(d.e)(),c=Object(i.useState)([]),l=Object(u.a)(c,2),a=l[0],s=l[1],j=Object(r.c)(x),v=Object(u.a)(j,1)[0],b=Object(r.c)(we),h=Object(u.a)(b,2),O=h[0],f=h[1],p=Object(r.c)(I),y=Object(u.a)(p,2),N=y[0],k=y[1],T=Object(r.c)($),S=Object(u.a)(T,2),w=(S[0],S[1],Object(i.useState)()),_=Object(u.a)(w,2),C=_[0],A=_[1],L=Object(i.useState)(),P=Object(u.a)(L,2),M=P[0],R=P[1],D=Object(i.useState)(),B=Object(u.a)(D,2),F=B[0],z=B[1],U=Object(i.useState)(),V=Object(u.a)(U,2),H=V[0],G=V[1],W=Object(i.useState)(),J=Object(u.a)(W,2),K=J[0],Y=J[1],Q=Object(i.useState)(!1),Z=Object(u.a)(Q,2),q=Z[0],X=Z[1],ee=function(e,t){console.log(t),e.stopPropagation(),m.getArtistAlbums(null===t||void 0===t?void 0:t.id).then((function(e){console.log("Artist albums",e.body)})).catch((function(e){console.error(e)}))};Object(i.useEffect)((function(){var e,t;if((null===O||void 0===O||null===(e=O.search)||void 0===e?void 0:e.length)<=0)return A(),G(),void Y();X(!0),ke({keyword:null===O||void 0===O?void 0:O.search,limit:4}).then((function(e){A(null===e||void 0===e?void 0:e.data)})).catch((function(e){console.log("err",e)})),Se({keyword:null===O||void 0===O?void 0:O.search,limit:5}).then((function(e){Y(null===e||void 0===e?void 0:e.data)})).catch((function(e){console.log("err",e)})),Te({keyword:null===O||void 0===O?void 0:O.search,limit:5}).then((function(e){G(null===e||void 0===e?void 0:e.data),X(!1)})).catch((function(e){console.log("err",e),X(!1)})),(t={keyword:null===O||void 0===O?void 0:O.search,limit:5},fe({method:"GET",url:"/search-albums",params:t})).then((function(e){z(null===e||void 0===e?void 0:e.data),X(!1)})).catch((function(e){console.log("err",e),X(!1)}))}),[v,null===O||void 0===O?void 0:O.search]),Object(i.useEffect)((function(){var e;(e={country:"IN",offset:0,limit:50},fe({method:"GET",url:"/categories",params:e})).then((function(e){s(null===e||void 0===e?void 0:e.data)})).catch((function(e){console.log(e)}))}),[]);return Object(n.jsx)("div",{className:"search",id:"myDiv",ref:e,onScroll:function(){e.current.scrollTop>=80?f(Object(E.a)(Object(E.a)({},O),{},{isBlack:!0})):f(Object(E.a)(Object(E.a)({},O),{},{isBlack:!1}))},children:Object(n.jsx)("div",{style:{marginTop:"80px"},children:(null===O||void 0===O?void 0:O.search.length)>0?Object(n.jsx)(n.Fragment,{children:q?Object(n.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:Object(n.jsx)(g.a,{})}):Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"search-results",children:[(null===C||void 0===C?void 0:C.length)>0&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"result-head",children:[Object(n.jsx)("h2",{className:"head",children:"Songs"}),Object(n.jsx)(o.b,{to:"/search/songs/".concat(null===O||void 0===O?void 0:O.search),className:"see-all",children:"SEE ALL"})]}),null===C||void 0===C?void 0:C.map((function(e,t){return Object(n.jsx)(De,{track:e,index:t,chooseTrack:function(){return t=e,console.log(t),void(N.playingTrack===t?(null===N||void 0===N?void 0:N.playing)?(m.pause(),k(Object(E.a)(Object(E.a)({},N),{},{playing:!1}))):(k(Object(E.a)(Object(E.a)({},N),{},{playingTrack:t,playing:!0})),m.play()):(m.play({uris:[null===t||void 0===t?void 0:t.uri]}),k(Object(E.a)(Object(E.a)({},N),{},{playing:!0,playingTrack:t}))));var t},seeall:function(){return"artist"===(e=C)&&(null===m||void 0===m||m.searchArtists(null===O||void 0===O?void 0:O.search,{limit:50}).then((function(e){G(e.body.artists.items.map((function(e){var t=null===e||void 0===e?void 0:e.images.reduce((function(e,t){return t.height>e.height?t:e}),e.images[0]);return{name:e.name,uri:e.uri,image:null===t||void 0===t?void 0:t.url}})))})).catch((function(e){console.error(e)}))),"playlist"===e&&m.searchPlaylists(null===O||void 0===O?void 0:O.search,{limit:50}).then((function(e){Y(e.body.playlists.items.map((function(e){var t=null===e||void 0===e?void 0:e.images.reduce((function(e,t){return t.height>e.height?t:e}),e.images[0]);return{name:e.name,uri:e.uri,image:t.url,owner:e.owner}})))})).catch((function(e){console.error(e)})),void("song"===e&&m.searchTracks(null===O||void 0===O?void 0:O.search,{limit:50}).then((function(e){A(e.body.tracks.items.map((function(e){var t=e.album.images.reduce((function(e,t){return t.height<e.height?t:e}),e.album.images[0]);return{artist:e.artists[0].name,title:e.name,uri:e.uri,albumUrl:t.url}})))})));var e}},null===e||void 0===e?void 0:e.uri)}))]}),Object(n.jsxs)("div",{className:"result-head",children:[Object(n.jsx)("h2",{className:"head",children:"Artists"}),Object(n.jsx)(o.b,{to:"/search/artists/".concat(null===O||void 0===O?void 0:O.search),className:"see-all",children:"SEE ALL"})]}),Object(n.jsx)("div",{className:"search-result-artist",children:null===H||void 0===H?void 0:H.map((function(e){var c,i;return Object(n.jsx)("div",{onClick:function(){return t("/artist/".concat(e.uri.split(":")[2]))},children:Object(n.jsxs)("div",{className:"artist-card",onMouseOver:function(){R(e.uri)},onMouseLeave:function(){R()},children:[Object(n.jsxs)("div",{className:"card-inner",children:[Object(n.jsx)("img",{src:e.image,alt:"artist",className:"artist-image"}),M===e.uri&&Object(n.jsx)(Ee,{width:"40",height:"40",item:e,playPlaylist:ee})]}),Object(n.jsxs)("div",{className:"card-outer",children:[Object(n.jsxs)("p",{className:"mt-1",children:[(null===(c=e.name)||void 0===c?void 0:c.length)>15?(null===(i=e.name)||void 0===i?void 0:i.substring(0,15))+"...":e.name," "]}),Object(n.jsx)("p",{className:"light",children:"Artist"})]})]})})}))}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"result-head",children:[Object(n.jsx)("h2",{className:"head",children:"Playlists"}),Object(n.jsx)(o.b,{to:"/search/playlists/".concat(null===O||void 0===O?void 0:O.search),className:"see-all",children:"SEE ALL"})]}),(null===K||void 0===K?void 0:K.length)<=5&&Object(n.jsx)("div",{className:"search-result-artist",children:null===K||void 0===K?void 0:K.map((function(e){var t,c,i;return Object(n.jsx)(o.b,{to:"/playlist/".concat(e.uri.split(":")[2]),className:"search-link",children:Object(n.jsxs)("div",{className:"artist-card",onClick:function(t){return ee(t,e)},onMouseOver:function(){R(e.uri)},onMouseLeave:function(){R()},children:[Object(n.jsxs)("div",{className:"card-inner",children:[Object(n.jsx)("img",{src:e.image,alt:"artist",className:"playlist-image"}),M===e.uri&&Object(n.jsx)(Ee,{width:"40",height:"40",playPlaylist:function(t){return ee(t,e)}})," "]}),Object(n.jsxs)("div",{className:"card-outer",children:[Object(n.jsx)("p",{className:"mt-1",children:(null===(t=e.name)||void 0===t?void 0:t.length)>15?(null===(c=e.name)||void 0===c?void 0:c.substring(0,15))+"...":e.name}),Object(n.jsxs)("p",{className:"light",children:["By ",null===e||void 0===e||null===(i=e.owner)||void 0===i?void 0:i.display_name]})]})]})})}))})]}),Object(n.jsxs)("div",{className:"result-head",children:[Object(n.jsx)("h2",{className:"head",children:"Albums"}),Object(n.jsx)(o.b,{to:"/search/albums/".concat(null===O||void 0===O?void 0:O.search),className:"see-all",children:"SEE ALL"})]}),Object(n.jsx)("div",{className:"search-result-artist",children:null===F||void 0===F?void 0:F.map((function(e){return Object(n.jsx)(Fe,{album:e,playPlaylist:function(t){return ee(t,e)},show:M,setShow:function(){return R()}})}))})]})})}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h1",{className:"categories-head",children:"Browse all"}),Object(n.jsx)("div",{className:"categories",children:null===a||void 0===a?void 0:a.map((function(e){return Object(n.jsx)(Be,{item:e,setSearchPlaylist:Y})}))})]})})})};c(203);var Ue=function(e){var t,c,i,l,a,s,o,d,j=e.track,v=e.index,b=e.show,h=e.date,O=Object(r.c)(I),m=Object(u.a)(O,2),g=m[0];return m[1],Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("td",{className:"song-number",children:b===(null===j||void 0===j?void 0:j.id)?(null===g||void 0===g?void 0:g.playingTrack)===j&&!0===(null===g||void 0===g?void 0:g.playing)?Object(n.jsx)(Re.a,{}):Object(n.jsx)(Pe.a,{className:"song-play"}):v+1}),Object(n.jsxs)("td",{className:"song-title",children:[Object(n.jsx)("img",{className:"songRow__album",src:null===j||void 0===j||null===(t=j.album)||void 0===t||null===(c=t.images[0])||void 0===c?void 0:c.url,alt:""}),Object(n.jsxs)("span",{className:"songRow__info",children:[Object(n.jsx)("h6",{className:"mb-0",children:(null===j||void 0===j||null===(i=j.name)||void 0===i?void 0:i.length)>42?(null===j||void 0===j||null===(l=j.name)||void 0===l?void 0:l.substring(0,42))+"...":null===j||void 0===j?void 0:j.name}),Object(n.jsxs)("p",{className:"mb-0",children:[null===j||void 0===j||null===(a=j.artists)||void 0===a?void 0:a.map((function(e){return null===e||void 0===e?void 0:e.name})).join(", ")," -"," "]})]})]}),Object(n.jsx)("td",{className:"song-album",children:null===j||void 0===j||null===(s=j.album)||void 0===s?void 0:s.name}),Object(n.jsx)("td",{className:"song-date",children:null===(o=new Date(h))||void 0===o||null===(d=o.toISOString())||void 0===d?void 0:d.split("T")[0]}),Object(n.jsx)("td",{className:"song-time",children:function(e){var t=Math.floor(e/6e4),c=(e%6e4/1e3).toFixed(0);return t+":"+(c<10?"0":"")+c}(null===j||void 0===j?void 0:j.duration_ms)})]})},Ve=c(117),He=c.n(Ve),Ge=c(58),We=c.n(Ge),Je=(c(204),Object(r.b)({key:"active",default:[]})),Ke=function(e){var t=e.playPlaylist,c=e.item;return Object(n.jsx)("div",{className:"cursor-pointer",style:{backgroundColor:"#1DB954",borderRadius:"500px",fontSize:"inherit",inlineSize:"56px",blockSize:"56px",display:"flex",alignItems:"center",justifyContent:"center"},onClick:function(e){return t(e,c)},children:Object(n.jsx)("span",{"aria-hidden":"true",class:"IconWrapper__Wrapper-sc-1hf1hjl-0 dZGDpi",children:Object(n.jsx)("svg",{role:"img",height:"28",width:"28",viewBox:"0 0 24 24",class:"Svg-sc-1bi12j5-0 jgfuCe",children:Object(n.jsx)("path",{d:"M5.7 3a.7.7 0 00-.7.7v16.6a.7.7 0 00.7.7h2.6a.7.7 0 00.7-.7V3.7a.7.7 0 00-.7-.7H5.7zm10 0a.7.7 0 00-.7.7v16.6a.7.7 0 00.7.7h2.6a.7.7 0 00.7-.7V3.7a.7.7 0 00-.7-.7h-2.6z"})})})})},Ye=function(){var e,t,c,l,a,s,j,v,b=Object(d.f)().id,h=Object(d.d)().pathname,O=Object(i.useRef)(),g=Object(i.useState)(),f=Object(u.a)(g,2),x=f[0],p=f[1],y=Object(r.c)(I),N=Object(u.a)(y,2),k=N[0],T=N[1],S=Object(r.c)(Je),w=Object(u.a)(S,2),_=w[0],C=w[1],A=Object(r.c)(we),L=Object(u.a)(A,2),P=L[0],M=L[1],R=localStorage.getItem("accessToken"),D=function(){var e,t,c;(null===k||void 0===k?void 0:k.playing)&&(null===k||void 0===k?void 0:k.playlistUri)===(null===_||void 0===_?void 0:_.uri)?(T(Object(E.a)(Object(E.a)({},k),{},{playing:!1})),m.pause()):(m.setAccessToken(R),m.play({context_uri:null===_||void 0===_?void 0:_.uri}),console.log(_),T(Object(E.a)(Object(E.a)({},k),{},{playing:!0,playingTrack:null===_||void 0===_||null===(e=_.tracks)||void 0===e||null===(t=e.items)||void 0===t||null===(c=t[0])||void 0===c?void 0:c.track,playlistUri:null===_||void 0===_?void 0:_.uri})))};return Object(i.useEffect)((function(){var e;"playlist"===h.split("/")[1]?(e={id:b},fe({method:"GET",url:"/playlist",params:e})).then((function(e){console.log(e),C(null===e||void 0===e?void 0:e.data)})).catch((function(e){console.log(e)})):"artist"===h.split("/")[1]&&m.getArtistAlbums(b).then((function(e){console.log("Artist albums",e.body)}),(function(e){console.error(e)}))}),[b]),Object(n.jsxs)("div",{className:"play-playlist",ref:O,onScroll:function(){O.current.scrollTop>=80?M(Object(E.a)(Object(E.a)({},P),{},{isBlack:!0})):M(Object(E.a)(Object(E.a)({},P),{},{isBlack:!1}))},children:[Object(n.jsx)("div",{className:"body__info",style:{background:"linear-gradient(#".concat(null===_||void 0===_?void 0:_.primary_color,", #121212 )")},children:Object(n.jsxs)("div",{className:"d-flex",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{className:"",height:192,width:192,src:(null===_||void 0===_?void 0:_.images)?null===_||void 0===_||null===(e=_.images[0])||void 0===e?void 0:e.url:""})}),Object(n.jsxs)("div",{className:"body__infoText ms-2 mt-5",children:[Object(n.jsx)("strong",{children:"PLAYLISTS"}),Object(n.jsx)("h2",{children:null===_||void 0===_?void 0:_.name}),Object(n.jsx)("p",{children:null===_||void 0===_?void 0:_.description}),Object(n.jsxs)("small",{children:[Object(n.jsx)(o.b,{to:"/",children:null===_||void 0===_||null===(t=_.owner)||void 0===t?void 0:t.display_name})," ",Object(n.jsx)("span",{className:"dot",children:"\u2022"}),Object(n.jsxs)("span",{className:"p-2",children:[null===_||void 0===_||null===(c=_.tracks)||void 0===c||null===(l=c.items)||void 0===l?void 0:l.length," Songs,"," "]}),Object(n.jsxs)("span",{className:"p-2",children:[null===_||void 0===_||null===(a=_.tracks)||void 0===a||null===(s=a.items)||void 0===s?void 0:s.length," Songs"]})]})]})]})}),Object(n.jsxs)("div",{className:"body__songs",children:[Object(n.jsxs)("div",{className:"body__icons",children:[Object(n.jsx)("span",{children:(null===k||void 0===k?void 0:k.playing)&&(null===k||void 0===k?void 0:k.playlistUri)===(null===_||void 0===_?void 0:_.uri)?Object(n.jsx)(Ke,{playPlaylist:function(){return D()}}):Object(n.jsx)(Ee,{width:"56",height:"56",playPlaylist:function(){return D()}})}),Object(n.jsx)(He.a,{className:"more"})]}),Object(n.jsxs)("table",{className:"songs",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"songs-head",children:[Object(n.jsx)("th",{className:"song-number",children:"#"}),Object(n.jsx)("th",{className:"song-title",children:"TITLE"}),Object(n.jsx)("th",{className:"song-album",children:"ALBUM"}),Object(n.jsx)("th",{className:"song-date",children:"DATE ADDED"}),Object(n.jsx)("th",{className:"song-time",children:Object(n.jsx)(We.a,{})})]})}),Object(n.jsx)("tbody",{children:null===_||void 0===_||null===(j=_.tracks)||void 0===j||null===(v=j.items)||void 0===v?void 0:v.map((function(e,t){return Object(n.jsx)("tr",{className:"songRow",onClick:function(){return t=e.track,console.log(t),void(k.playingTrack===t?(null===k||void 0===k?void 0:k.playing)?(m.pause(),T(Object(E.a)(Object(E.a)({},k),{},{playing:!1}))):(T(Object(E.a)(Object(E.a)({},k),{},{playingTrack:t,playing:!0})),m.play()):(m.play({uris:[null===t||void 0===t?void 0:t.uri]}),T(Object(E.a)(Object(E.a)({},k),{},{playing:!0,playingTrack:t}))));var t},onMouseEnter:function(){var t;return p(null===e||void 0===e||null===(t=e.track)||void 0===t?void 0:t.id)},onMouseLeave:function(){return p()},children:Object(n.jsx)(Ue,{track:e.track,index:t,show:x,date:e.added_at},null===e||void 0===e?void 0:e.id)})}))})]})]})]})},Qe=(c(205),function(){var e=Object(i.useRef)(),t=Object(r.c)(I),c=Object(u.a)(t,2),l=c[0],a=c[1],s=Object(r.c)(we),d=Object(u.a)(s,2),j=d[0],v=d[1],b=Object(i.useState)(),h=Object(u.a)(b,2),O=h[0],g=h[1],f=Object(i.useState)(),x=Object(u.a)(f,2),p=x[0],y=x[1],N=Object(i.useState)(),k=Object(u.a)(N,2),T=k[0],S=k[1],w=Object(i.useState)(),_=Object(u.a)(w,2),C=_[0],A=_[1],L=Object(i.useState)(!1),P=Object(u.a)(L,2),M=(P[0],P[1]);Object(i.useEffect)((function(){var e,t=null===(e=window.location.pathname)||void 0===e?void 0:e.split("/");"artists"===t[2]&&Te({keyword:t[3],limit:50}).then((function(e){console.log("Essssss",e),S(null===e||void 0===e?void 0:e.data),M(!1)})).catch((function(e){console.log("err",e),M(!1)})),"playlists"===t[2]&&Se({keyword:t[3],limit:50}).then((function(e){console.log("playlistssssss",e),A(null===e||void 0===e?void 0:e.data)})).catch((function(e){console.log("err",e)})),"songs"===t[2]&&ke({keyword:t[3],limit:50}).then((function(e){console.log("songssss",e),y(null===e||void 0===e?void 0:e.data)})).catch((function(e){console.log("err",e)}))}),[]);var R=function(e){a(Object(E.a)(Object(E.a)({},l),{},{playingTrack:e}))};return Object(n.jsx)("div",{className:"search",ref:e,onScroll:function(){e.current.scrollTop>=80?v(Object(E.a)(Object(E.a)({},j),{},{isBlack:!0})):v(Object(E.a)(Object(E.a)({},j),{},{isBlack:!1}))},children:Object(n.jsx)("div",{style:{marginTop:"40px"},children:Object(n.jsxs)("div",{className:"search-results",children:[(null===T||void 0===T?void 0:T.length)>0&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"result-head",children:Object(n.jsx)("h2",{className:"head",children:"Artists"})}),Object(n.jsx)("div",{className:"search-result-artist",children:null===T||void 0===T?void 0:T.map((function(e){var t,c,i;return Object(n.jsx)(o.b,{to:"/artist/".concat(null===e||void 0===e||null===(t=e.uri)||void 0===t?void 0:t.split(":")[2]),className:"search-link",children:Object(n.jsxs)("div",{className:"artist-card",onMouseOver:function(){g(e.uri)},onMouseLeave:function(){g()},children:[Object(n.jsxs)("div",{className:"card-inner",children:[Object(n.jsx)("img",{src:e.image,alt:"artist",className:"artist-image"}),O===e.uri&&Object(n.jsx)(Ee,{width:"40",height:"40",playPlaylist:function(){return R(e)}})," "]}),Object(n.jsxs)("div",{className:"card-outer",children:[Object(n.jsx)("p",{className:"mt-1",children:(null===(c=e.name)||void 0===c?void 0:c.length)>15?(null===(i=e.name)||void 0===i?void 0:i.substring(0,15))+"...":e.name}),Object(n.jsx)("p",{className:"light",children:"Artist"})]})]})})}))})]}),(null===C||void 0===C?void 0:C.length)>0&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"result-head pb-5",children:Object(n.jsxs)("h1",{className:"head",children:[console.log(C)," Playlists"]})}),Object(n.jsx)("div",{className:"search-result-artist",children:null===C||void 0===C?void 0:C.map((function(e){var t,c,i;return Object(n.jsx)(o.b,{to:"/playlist/".concat(e.uri.split(":")[2]),className:"search-link",children:Object(n.jsxs)("div",{className:"artist-card",onClick:function(){return R(e)},onMouseOver:function(){g(e.uri)},onMouseLeave:function(){g()},children:[Object(n.jsxs)("div",{className:"card-inner",children:[Object(n.jsx)("img",{src:e.image,alt:"artist",className:"playlist-image"}),O===e.uri&&Object(n.jsx)(Ee,{width:"40",height:"40",playPlaylist:function(){return R(e)}})]}),Object(n.jsxs)("div",{className:"card-outer",children:[Object(n.jsx)("p",{className:"mt-1",children:(null===(t=e.name)||void 0===t?void 0:t.length)>15?(null===(c=e.name)||void 0===c?void 0:c.substring(0,15))+"...":e.name}),Object(n.jsxs)("p",{className:"light",children:["By ",null===e||void 0===e||null===(i=e.owner)||void 0===i?void 0:i.display_name]})]})]})})}))})]}),(null===p||void 0===p?void 0:p.length)>0&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"result-head",children:Object(n.jsx)("h2",{className:"head",children:"Playlists"})}),null===p||void 0===p?void 0:p.map((function(e,t){return Object(n.jsx)(De,{track:e,chooseTrack:function(){return t=e,console.log(t),void(l.playingTrack===t?(null===l||void 0===l?void 0:l.playing)?(m.pause(),a(Object(E.a)(Object(E.a)({},l),{},{playing:!1}))):(a(Object(E.a)(Object(E.a)({},l),{},{playingTrack:t,playing:!0})),m.play()):(m.play({uris:[null===t||void 0===t?void 0:t.uri]}),a(Object(E.a)(Object(E.a)({},l),{},{playing:!0,playingTrack:t}))));var t},index:t},null===e||void 0===e?void 0:e.uri)}))]})]})})})}),Ze=function(){return Object(n.jsx)("div",{className:"search",children:Object(n.jsxs)("div",{style:{marginTop:"40px"},children:[Object(n.jsx)("h2",{children:"Playlists"}),Object(n.jsx)("div",{className:""})]})})},qe=function(){var e=Object(d.f)().id,t=Object(i.useRef)(),c=Object(i.useState)([]),l=Object(u.a)(c,2),a=l[0],s=l[1],o=Object(r.c)(I),j=Object(u.a)(o,2),v=j[0],b=j[1],h=Object(r.c)(we),O=Object(u.a)(h,2),g=O[0],f=O[1],x=Object(i.useState)(),p=Object(u.a)(x,2),y=(p[0],p[1]),N=Object(i.useState)(),k=Object(u.a)(N,2),T=k[0],S=k[1];return Object(i.useEffect)((function(){m.getAlbum(e).then((function(e){var t;return console.log(e),y(null===e||void 0===e?void 0:e.body),null===(t=e.body.tracks.items)||void 0===t?void 0:t.map((function(e){return e.id}))})).then((function(e){return m.getTracks(e)})).then((function(e){var t;console.log(e.body),s(null===e||void 0===e||null===(t=e.body)||void 0===t?void 0:t.tracks)})).catch((function(e){console.error(e)}))}),[e]),Object(n.jsxs)("div",{className:"play-playlist",ref:t,onScroll:function(){t.current.scrollTop>=80?f(Object(E.a)(Object(E.a)({},g),{},{isBlack:!0})):f(Object(E.a)(Object(E.a)({},g),{},{isBlack:!1}))},children:[Object(n.jsx)("div",{className:"body__info",style:{},children:Object(n.jsxs)("div",{className:"d-flex",children:[Object(n.jsx)("div",{}),Object(n.jsx)("div",{className:"body__infoText ms-2 mt-5",children:Object(n.jsx)("strong",{children:"PLAYLISTS"})})]})}),Object(n.jsx)("div",{className:"body__songs",children:Object(n.jsxs)("table",{className:"songs",children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"songs-head",children:[Object(n.jsx)("th",{className:"song-number",children:"#"}),Object(n.jsx)("th",{className:"song-title",children:"TITLE"}),Object(n.jsx)("th",{className:"song-album",children:"ALBUM"}),Object(n.jsx)("th",{className:"song-date",children:"DATE ADDED"}),Object(n.jsx)("th",{className:"song-time",children:Object(n.jsx)(We.a,{})})]})}),Object(n.jsx)("tbody",{children:null===a||void 0===a?void 0:a.map((function(e,t){var c;return Object(n.jsx)("tr",{className:"songRow",onClick:function(){return function(e){console.log(e),v.playingTrack===e?(null===v||void 0===v?void 0:v.playing)?(m.pause(),b(Object(E.a)(Object(E.a)({},v),{},{playing:!1}))):(b(Object(E.a)(Object(E.a)({},v),{},{playingTrack:e,playing:!0})),m.play()):(m.play({uris:[null===e||void 0===e?void 0:e.uri]}),b(Object(E.a)(Object(E.a)({},v),{},{playing:!0,playingTrack:e})))}(e)},onMouseEnter:function(){return S(null===e||void 0===e?void 0:e.id)},onMouseLeave:function(){return S()},children:Object(n.jsx)(Ue,{track:e,index:t,show:T,date:null===e||void 0===e||null===(c=e.album)||void 0===c?void 0:c.release_date},null===e||void 0===e?void 0:e.id)})}))})]})})]})},Xe=function(){var e=Object(d.f)().id,t=Object(i.useState)([]),c=Object(u.a)(t,2),l=(c[0],c[1],Object(i.useState)([])),a=Object(u.a)(l,2),s=a[0],o=a[1],j=Object(r.c)(I),v=Object(u.a)(j,2);v[0],v[1];return Object(i.useEffect)((function(){m.getArtistAlbums(e).then((function(e){var t;console.log("Artist albums",e.body),o(null===e||void 0===e||null===(t=e.body)||void 0===t?void 0:t.items)}),(function(e){console.error(e)}))}),[e]),Object(n.jsx)("div",{className:"search",children:Object(n.jsx)("div",{style:{marginTop:"80px"},children:Object(n.jsxs)("div",{className:"search-results",children:[Object(n.jsx)("div",{className:"result-head",children:Object(n.jsx)("h2",{className:"head",children:"Artist"})}),Object(n.jsx)("div",{className:"search-result-artist",children:null===s||void 0===s?void 0:s.map((function(e){return Object(n.jsx)(Fe,{album:e})}))})]})})})},$e=function(){return Object(d.h)([{path:"home",element:Object(n.jsx)(Ae,{})},{path:"create-playlist",element:Object(n.jsx)(Ae,{})},{path:"search",element:Object(n.jsx)(ze,{})},{path:"playlist/:id",element:Object(n.jsx)(Ye,{})},{path:"artist/:id",element:Object(n.jsx)(Xe,{})},{path:"albums/:id",element:Object(n.jsx)(qe,{})},{path:"search/:path/:search",element:Object(n.jsx)(Qe,{})},{path:"library",element:Object(n.jsx)(Ze,{})},{path:"/",element:Object(n.jsx)(Ae,{})}])},et=function(e){Object(_.a)(c,e);var t=Object(C.a)(c);function c(e){var n;return Object(S.a)(this,c),(n=t.call(this,e)).state={hasError:!1},n}return Object(w.a)(c,[{key:"componentDidCatch",value:function(e,t){console.log("error",e)}},{key:"render",value:function(){var e=this.props.children;return this.state.hasError?Object(n.jsx)("div",{className:"something-wrong",children:Object(n.jsx)("div",{className:"something-wrong--inner",children:Object(n.jsx)("h3",{children:"Something went wrong."})})}):e}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),c}(l.a.Component),tt=function(){var e=Object(r.c)(x),t=Object(u.a)(e,2)[1],c=Object(d.e)(),l=localStorage.getItem("refreshToken"),a=localStorage.getItem("expiresIn"),s=localStorage.getItem("accessToken"),o=Object(r.c)($),j=Object(u.a)(o,2),b=(j[0],j[1]);return Object(i.useEffect)((function(){s&&(null===m||void 0===m||m.setAccessToken(s),null===m||void 0===m||m.getUserPlaylists().then((function(e){b(null===e||void 0===e?void 0:e.body)})).catch((function(e){console.log(e.message)})))}),[s]),Object(i.useEffect)((function(){l?!s||(new Date).getTime()>=a?v.a.post("http://localhost:4000/refresh",{refreshToken:l}).then((function(e){var n,i,l;console.log(e),localStorage.setItem("accessToken",null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.accessToken);var a=(new Date).getTime()+1e3*(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.expiresIn);localStorage.setItem("expiresIn",a),t(null===e||void 0===e||null===(l=e.data)||void 0===l?void 0:l.accessToken),m.setAccessToken(s),c("/home")})).catch((function(){window.location="/"})):t(s):c("/auth")}),[c,l]),Object(n.jsx)("div",{children:Object(n.jsxs)(et,{children:[Object(n.jsxs)("div",{className:"player__body",children:[Object(n.jsx)(ee,{}),Object(n.jsx)(Ce,{}),Object(n.jsx)($e,{})]}),Object(n.jsx)(z,{spotify:m})]})})},ct=function(){return Object(d.h)([{path:"auth/*",element:Object(n.jsx)(T,{})},{path:"redirect/*",element:Object(n.jsx)(y,{})},{path:"/*",element:Object(n.jsx)(tt,{})}])},nt=function(){return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(ct,{})})},it=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,235)).then((function(t){var c=t.getCLS,n=t.getFID,i=t.getFCP,l=t.getLCP,a=t.getTTFB;c(e),n(e),i(e),l(e),a(e)}))};c(206);s.a.render(Object(n.jsx)(l.a.StrictMode,{children:Object(n.jsx)(o.a,{children:Object(n.jsx)(r.a,{children:Object(n.jsx)(nt,{})})})}),document.getElementById("root")),it()}},[[207,1,2]]]);
//# sourceMappingURL=main.a84935e3.chunk.js.map